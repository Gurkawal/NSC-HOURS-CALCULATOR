<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NSC Hours Calculator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: url('https://images.unsplash.com/photo-1604251609430-634cfb4b21c0?auto=format&fit=crop&w=1470&q=80') no-repeat center center fixed;
      background-size: cover;
      color: #fff;
    }
    h2, h3 { text-align: center; color: #fff; }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
      background-color: rgba(0, 102, 204, 0.9);
      color: #fff;
    }
    th, td {
      border: 1px solid #fff;
      padding: 8px;
      text-align: center;
    }
    th { background-color: #004080; }
    input[type="number"] {
      width: 80px;
      background-color: #e6f2ff;
      color: #000;
      border: 1px solid #004080;
    }
    button {
      padding: 10px;
      margin-top: 15px;
      width: 100%;
      background-color: #0059b3;
      color: white;
      border: none;
      border-radius: 5px;
      font-weight: bold;
    }
    .warning { color: yellow; font-weight: bold; margin-top: 10px; }
    .summary {
      margin-top: 20px;
      padding: 10px;
      background: rgba(255, 255, 255, 0.9);
      color: #000;
      border-radius: 5px;
    }
  </style>
</head>
<body>
  <h2>NSC Hours-of-Service Calculator</h2>  <table>
    <thead>
      <tr>
        <th>Day</th>
        <th>Shift 1 Hours</th>
        <th>Shift 2 Hours</th>
        <th>Split (Non-Working) Hours</th>
        <th>Off-Duty Hours</th>
        <th>Total Duty</th>
        <th>TET (Max 16h)</th>
        <th>Warnings</th>
      </tr>
    </thead>
    <tbody id="logTable"></tbody>
  </table>  <div id="inputSection">
    <h3>Enter Hours for Day <span id="currentDay">1</span></h3>
    <label for="shift1">Shift 1 Hours</label>
    <input type="number" id="shift1" min="0" max="14" step="0.1"><label for="shift2">Shift 2 Hours</label>
<input type="number" id="shift2" min="0" max="14" step="0.1">

<label for="offduty">Off-Duty Hours Before Shift</label>
<input type="number" id="offduty" min="0" max="24" step="0.1">

<button onclick="calculateDay()">Submit Day</button>

  </div><button onclick="resetLog()">Reset Log</button>

  <div class="warning" id="warning"></div>
  <div class="summary" id="summary"></div>  <script>
    const logs = [];
    let currentDay = 1;

    function calculateDay() {
      const shift1 = parseFloat(document.getElementById('shift1').value);
      const shift2 = parseFloat(document.getElementById('shift2').value);
      const off = parseFloat(document.getElementById('offduty').value);

      if (isNaN(shift1) || isNaN(shift2) || isNaN(off)) {
        document.getElementById('warning').innerText = 'Please fill out all fields correctly.';
        return;
      }

      const split = 24 - shift1 - shift2 - off;
      const totalDuty = shift1 + shift2;
      const TET = totalDuty + off + split;
      let message = '';

      if (shift1 > 14) message += 'Shift 1 exceeds 14h. ';
      if (shift2 > 14) message += 'Shift 2 exceeds 14h. ';
      if (totalDuty > 14) message += 'Exceeds 14h total duty. ';
      if (TET > 16) message += 'TET exceeds 16h. ';
      if (off < 8) message += 'Off-duty < 8h. ';

      logs[currentDay - 1] = { day: currentDay, shift1, shift2, split, off, totalDuty, TET, message };

      updateTable();

      currentDay++;
      if (currentDay > 14) {
        document.getElementById('inputSection').style.display = 'none';
        document.getElementById('warning').innerText = 'All 14 days entered.';
      } else {
        document.getElementById('currentDay').innerText = currentDay;
        document.getElementById('shift1').value = '';
        document.getElementById('shift2').value = '';
        document.getElementById('offduty').value = '';
        document.getElementById('warning').innerText = '';
      }
    }

    function updateTable() {
      const tbody = document.getElementById('logTable');
      tbody.innerHTML = '';
      let week1 = 0, week2 = 0, has24hrOff = false;

      logs.forEach((log, i) => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${log.day}</td>
          <td>${log.shift1}</td>
          <td>${log.shift2}</td>
          <td>${log.split.toFixed(1)}</td>
          <td>${log.off}</td>
          <td>${log.totalDuty}</td>
          <td>${log.TET.toFixed(1)}</td>
          <td class="warning">${log.message}</td>
        `;
        tbody.appendChild(row);

        if (i < 7) week1 += log.totalDuty;
        else week2 += log.totalDuty;

        if (log.off >= 24) has24hrOff = true;
      });

      const summary = document.getElementById('summary');
      summary.innerHTML = `
        Week 1 On-Duty Total: ${week1.toFixed(1)}h<br>
        Week 2 On-Duty Total: ${week2.toFixed(1)}h<br>
        ${week1 > 70 || week2 > 70 ? '<span class="warning">Reset required: over 70h on-duty in a 7-day period.</span><br>' : ''}
        ${has24hrOff ? '✅ 24h consecutive off-duty taken in 14 days.' : '<span class="warning">❌ 24h off-duty in 14 days NOT taken.</span>'}
      `;
    }

    function resetLog() {
      logs.length = 0;
      currentDay = 1;
      document.getElementById('currentDay').innerText = currentDay;
      document.getElementById('inputSection').style.display = 'block';
      updateTable();
      document.getElementById('summary').innerHTML = '';
      document.getElementById('warning').innerHTML = '';
    }
  </script></body>
</html>
